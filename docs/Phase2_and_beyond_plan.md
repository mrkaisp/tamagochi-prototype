# Phase 2 以降の開発計画

## Phase 2: 育成ロジックとコンテンツ強化
- **フェーズ分岐ロジック刷新**: `docs/specifications/05_成長分岐表.md` を基に、フェーズ2〜4のスコアリングをデータ駆動で実装。JSON化した重みテーブルを `src/game/data` に配置し、`FlowerStats` から読み込む。
- **キャラクター属性反映**: `03_キャラクター.md` の遺伝因子・性格・タイプを分岐計算に組み込み、種ごとに異なる結果が得られるようにする。セーブデータへの属性保持を確認。
- **パラメータ演出**: 栄養<20 の表情変化、環境低下時の進行阻害アニメーション、陰陽傾向の明確なビジュアルを追加。`UIRenderer` でインジケーターに色変更や点滅を実装。
- **花言葉イベント拡張**: 花の完成時に選択肢を提示し、結果に応じたメンタル変動・エンディングテキストを表示。結果をセーブとログに残す。

## Phase 3: テスト・ログ・再現性
- **自動テスト拡充**: テストケース文書と紐付く統合テストを `tests/` に追加。画面遷移、栄養制限、睡眠制約、分岐結果など主要シナリオをカバー。
- **乱数制御**: `RandomManager` に外部シード設定APIを追加し、CLIやテストからシード固定できるようにする。分岐結果の再現性を確保。
- **ログ改善**: 成長分岐の入力値・スコア・決定結果、死亡や花言葉遷移のトリガーを `flower_game.log` に詳細出力。デバッグHUDから参照可能にする。
- **セーブ堅牢性**: バージョン管理用メタデータを保存し、破損時の復旧フロー（バックアップ/デフォルト補正）を整備。

## Phase 4: 体験向上と運用整備
- **ミニゲーム実装**: 環境整備モードをライトなアクションもしくはタイム制ミニゲーム化し、成功時の環境スコア上昇と演出を追加。
- **アセット刷新**: 成長段階/分岐結果に応じたスプライト差分を制作し、スクリーンショットも更新。128×128 制約での美術調整を行う。
- **パフォーマンス最適化**: 早送り時のフレームタイムを計測し、不要な描画更新を抑制。Raspberry Pi 等の低スペック環境での挙動を検証。
- **ドキュメント・運用**: README と仕様書を最新実装に合わせて更新。カーソル/Obsidian 連携手順、QA チェックリストの運用方法をまとめる。
