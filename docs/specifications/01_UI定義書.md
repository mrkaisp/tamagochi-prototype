## 概要
本設計書は「ふらわっち」ゲームにおけるUIを定義したものである。  

---

## 画面一覧

| No | 画面名 | 機能概要 | 主な遷移元 | 主な遷移先 |
|----|----------|------------|--------------|--------------|
| 00 | タイトル画面 | ゲーム開始 | 電源ON / リセット後 | 種の選択 |
| 01 | 種の選択 | 育成対象の選択 | タイトル画面 | 時間設定画面 |
| 02 | 時間設定画面 | 時刻設定・早送り・一時停止 | 種の選択 / 設定画面 | メイン画面 |
| 03 | メイン画面 | 状態確認・モード選択 | 時間設定完了 / 各機能戻り | 設定画面 / ステータス画面 / 各モード |
| 04 | 設定画面 | リセット・時間変更 | メイン画面 | 時間設定 / リセット確認 / メイン画面 |
| 05 | ステータス表示画面 | パラメータ確認 | メイン画面 | メイン画面 |
| 06 | 水やり/餌やりモード | 栄養付与 | メイン画面 | メイン画面 |
| 07 | 光モード | 光のON/OFF | メイン画面 | メイン画面 |
| 09 | 花言葉選択 | 成長進化選択 | 自動（時間経過） | メイン画面 |
| 10 | 死亡/ニューゲーム | ゲーム終了→再開始誘導 | 自動（栄養0・寿命） | タイトル画面 |

---

## Mermaid 画面遷移図

```mermaid
graph TD

%% --- Title ---
A00["00 タイトル画面<br/>電源ON/リセット後表示"]
A01["01 種の選択<br/>育成対象選択"]
A02["02 時間設定画面<br/>時刻設定/早送り/停止"]
A03["03 メイン画面<br/>状態確認・モード選択"]
A04["04 設定画面<br/>リセット/時間設定"]
A05["05 ステータス画面<br/>栄養・環境・光・メンタル確認"]
A06["06 水やり/餌やりモード<br/>栄養付与"]
A07["07 光モード<br/>光ON/OFF"]
A09["09 花言葉選択<br/>進化設問"]
A10["10 死亡/ニューゲーム<br/>終了→再開始誘導"]

%% --- Main transitions ---
A00 -->|ボタン2：決定| A01
A01 -->|カーソル選択→ボタン2| A02
A02 -->|カーソル選択「決定」→ボタン2| A03

%% --- Main menu selections ---
A03 -->|カーソル選択「設定」→ボタン2| A04
A03 -->|カーソル選択「ステータス」→ボタン2| A05
A03 -->|カーソル選択「水やり」→ボタン2| A06
A03 -->|カーソル選択「光」→ボタン2| A07

%% --- Return to Main after action ---
A04 -->|カーソル選択「戻る」→ボタン2| A03
A05 -->|ボタン2：戻る| A03
A06 -->|カーソル選択「戻る」→ボタン2| A03
A07 -->|カーソル選択「戻る」→ボタン2| A03

%% --- Settings branch ---
A04 -->|カーソル選択「時間設定」→ボタン2| A02
A04 -->|カーソル選択「やりなおし」→ボタン2| A00

%% --- Auto events ---
A03 -->|時間経過（自動）| A09
A09 -->|カーソル選択→ボタン2| A03
A03 -->|栄養0 or 寿命到達（自動）| A10
A10 -->|ボタン2：決定| A00
```

---

## 遷移条件まとめ

| 遷移元 | 条件・トリガー | 遷移先 |
|---------|----------------|----------|
| タイトル画面 | ボタン2（決定） | 種の選択 |
| 種の選択 | カーソルで種を選択→ボタン2（決定） | 時間設定画面 |
| 時間設定 | カーソルで「決定」を選択→ボタン2 | メイン画面 |
| メイン画面 | カーソルで「設定」を選択→ボタン2 | 設定画面 |
| メイン画面 | カーソルで「ステータス」を選択→ボタン2 | ステータス画面 |
| メイン画面 | カーソルで「水やり」を選択→ボタン2 | 水やりモード |
| メイン画面 | カーソルで「光」を選択→ボタン2 | 光モード |
| メイン画面 | 栄養≦5で枯死（自動） | 死亡/ニューゲーム画面 |
| メイン画面 | 成長タイマー到達（自動） | 花言葉選択画面 |
| 設定画面 | カーソルで「時間設定」を選択→ボタン2 | 時間設定画面 |
| 設定画面 | カーソルで「やりなおし」を選択→ボタン2 | タイトル画面 |
| 設定画面 | カーソルで「戻る」を選択→ボタン2 | メイン画面 |
| ステータス画面 | ボタン2（決定）またはカーソルで「戻る」選択 | メイン画面 |
| 各モード画面 | ボタン2（決定）またはカーソルで「戻る」選択 | メイン画面 |
| 花言葉選択 | カーソルで選択肢を選択→ボタン2 | メイン画面 |
| 死亡/ニューゲーム | ボタン2（決定） | タイトル画面 |

---

## 制約・例外ルール

| 項目 | 内容 |
|------|------|
| 水やり/餌やりモード | 同じ行動を1時間内に3回以上行うと効果無効（テスト用オプションで無効化可能） |
| 水やり/餌やりモード | 睡眠時間に関係なく常時操作可能（24時間世話が必要） |
| 光モード | 光ON状態は時間経過で光蓄積量が増加する。光OFF操作で光蓄積量が減少する |
| 花言葉選択・死亡画面 | 自動遷移以外での表示なし |
| リセット | 「やりなおす」選択時にデータ削除・初期化 |
| 解像度 | 画面は、240×240ピクセルのドット表示 |
| 死亡条件 | 栄養（water_level）が5以下になると枯死する。寿命機能は未実装 |

---

## 各画面のメニュー構成

### タイトル画面（00）
- 選択肢なし（ボタン2で次へ）

### 種の選択画面（01）
- 選択肢（縦並び、ボタン1/3で移動）：
  1. 日
  2. 月
- ボタン2で決定

### 時間設定画面（02）
- 選択肢（縦並び、ボタン1/3で移動）：
  1. 一時停止 ON/OFF（切り替え）
  2. 時間スケール 変更（1.0x → 4.0x → 0.25x を循環）
  3. 決定（メイン画面へ）

### メイン画面（03）
- **キャラクター表示**: 中央に擬人化されたキャラクターを表示。表情・ポーズで状態を視覚的に表現
  - 成長段階（種・芽・茎・蕾・花）に応じたデザイン
  - 栄養（water_level）・環境・メンタル状態に応じた表情の変化
- **ゲーム内時計**: 画面左上にゲーム内時間をデジタル時計形式で表示（HH:MM:SS形式）
  - 初期時間: 0:00:00（ゲーム開始時）
  - 時間経過: ゲーム内時間は1秒ごとに増加する（時間スケール設定に応じて変化）
  - 時間スケール: 1.0x（通常）、4.0x（早送り）、0.25x（スローモーション）で変更可能
- **選択肢**（縦並び、ボタン1/3で移動）：
  1. 詳細情報（ステータス表示）
  2. 水やり
  3. 光
  4. 設定
- ボタン2で各機能を実行
- **注意**: 定量表示（水・光バー、言葉の数値）は表示しない。詳細はステータス画面で確認

### 設定画面（04）
- 選択肢（縦並び、ボタン1/3で移動）：
  1. 時間設定変更
  2. やりなおし
  3. 戻る
- ボタン2で決定

### ステータス表示画面（05）
- 選択肢：
  1. 戻る
- ボタン2で戻る

### 水やり/餌やりモード（06）
- 選択肢（横並び、ボタン1/3で移動）：
  1. 水やり
  2. 肥料
  3. 戻る
- ボタン2で決定
- **注意**: 1時間内に3回まで（テスト用オプションで無効化可能）

### 光モード（07）
- 選択肢（横並び、ボタン1/3で移動）：
  1. 光 ON
  2. 光 OFF
  3. 戻る
- ボタン2で決定
- **光ON**: 光をONにすると、ONの間は時間経過で光蓄積量が増加する（1秒あたり15.0増加、最大100まで）
- **光OFF**: 光をOFFにすると、OFFの間は時間経過で光蓄積量が減少する（1秒あたり10.0減少、最小0まで）
- **注意**: 光ON/OFF状態は手動で切り替えるまで継続する

### 花言葉選択画面（09）
- 選択肢（縦並び、ボタン1/3で移動）：
  1. 「好き」を伝える
  2. 「嫌い」を伝える
- ボタン2で決定

### 死亡/ニューゲーム画面（10）
- 選択肢なし（ボタン2でタイトルへ）

---
